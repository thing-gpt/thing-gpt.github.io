<!DOCTYPE html>
<html>
<head>
    <title>Sigma Test</title>
    <script src="https://cdn.jsdelivr.net/npm/groq-sdk/dist/groq-sdk.min.js"></script>
</head>
<body>

<input type="text" id="myText" value="Some text...">
<button id="myButton">Try it</button>
<p id="demo"></p>

<script>
    const groq = new Groq();

    async function getGroqChatCompletion(userInput) {
        try {
            const response = await groq.chat.completions.create({
                messages: [
                    {
                        role: "system",
                        content: "you are a helpful assistant.",
                    },
                    {
                        role: "user",
                        content: userInput,
                    },
                ],
                model: "llama-3.3-70b-versatile",
                temperature: 0.5,
                max_completion_tokens: 1024,
                top_p: 1,
                stop: null,
                stream: false,
            });
            return response.choices[0]?.message?.content || "";
        } catch (error) {
            console.error("Error:", error);
            return "An error occurred.";
        }
    }

    function handleButtonClick() {
        const userInput = document.getElementById('myText').value;
        console.log(`Button clicked, input value: ${userInput}`);
        getGroqChatCompletion(userInput).then(response => {
            console.log(`Response received: ${response}`);
            document.getElementById('demo').innerHTML = response;
        });
    }

    document.getElementById('myButton').onclick = handleButtonClick;
</script>

</body>
</html>