<!DOCTYPE html>
<html>
<head>
    <title>Sigma Test</title>
    <script src="https://cdn.jsdelivr.net/npm/groq-sdk/dist/groq-sdk.min.js"></script>
</head>
<body>

<input type="text" id="myText" value="Some text...">
<button id="myButton" onclick="handleButtonClick()">Try it</button>
<p id="demo"></p>

<script>
    let groq;

    // Wait for the Groq SDK to finish loading
    (function() {
        const intervalId = setInterval(() => {
            if (typeof Groq !== 'undefined') {
                groq = new Groq();
                clearInterval(intervalId);
            }
        }, 100);
    })();

    async function getGroqChatCompletion(userInput) {
        console.log('Getting chat completion...');
        try {
            const response = await groq.chat.completions.create({
                messages: [
                    {
                        role: "system",
                        content: "you are a helpful assistant.",
                    },
                    {
                        role: "user",
                        content: userInput,
                    },
                ],
                model: "llama-3.3-70b-versatile",
                temperature: 0.5,
                max_completion_tokens: 1024,
                top_p: 1,
                stop: null,
                stream: false,
            });
            console.log('Response received:', response);
            return response.choices[0]?.message?.content || "";
        } catch (error) {
            console.error("Error:", error);
            return "An error occurred.";
        }
    }

    async function handleButtonClick() {
        console.log('Button clicked!');
        if (!groq) {
            console.error('Groq SDK not loaded yet. Please try again.');
            return;
        }
        const userInput = document.getElementById('myText').value;
        console.log('Input value:', userInput);
        const response = await getGroqChatCompletion(userInput);
        console.log('Response:', response);
        document.getElementById('demo').innerHTML = response;
    }
</script>

</body>
</html>o